@Test
void testIngestReportToFolder_WithValidData_IngestsSuccessfully() throws Exception {

    // Arrange
    String portal = "testPortal";
    String clientID = "client123";
    String folderName = "TestFolder";
    byte[] docContent = "Test Document Content".getBytes();
    String applicationGroup = "TestGroup";
    String application = "TestApp";
    String[] values = new String[]{"value1", "value2"};

    Hashtable<String, String> hashValues = new Hashtable<>();
    hashValues.put("key1", "value1");

    // Setup pool behavior
    when(mockPool.borrowObject()).thenReturn(mockAbstractODServer);

    when(mockAbstractODServer.addReportToFolder(
            anyString(),
            any(byte[].class),
            anyString(),
            anyString(),
            any(Hashtable.class)
    )).thenReturn("SUCCESS");

    // âœ… ADD THIS LINE (missing earlier)
    CMODConnectionManager fakeMgr = mock(CMODConnectionManager.class);

    try (
            MockedStatic<TDTransform> tdMock =
                    Mockito.mockStatic(TDTransform.class);
            MockedStatic<CMODConnectionManager> mockedStatic =
                    Mockito.mockStatic(CMODConnectionManager.class)
    ) {

        tdMock.when(TDTransform::getallClientList)
              .thenReturn(Collections.emptyList());

        mockedStatic.when(CMODConnectionManager::getInstance)
                .thenReturn(fakeMgr);

        when(fakeMgr.getODServerPool(
                anyString(),
                anyString(),
                anyString()
        )).thenReturn(mockPool);

        assertDoesNotThrow(() -> {
            odServiceNative.ingestReportToFolder(
                    portal,
                    clientID,
                    folderName,
                    docContent,
                    applicationGroup,
                    application,
                    values,
                    hashValues
            );
        });

        verify(mockPool).borrowObject();
        verify(mockPool).returnObject(mockAbstractODServer);
    }
}
